<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing </title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">


    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">


</head>

<body class="bg-light">

    <div class="container mb-5">

        <div class="container">
            <h5 class="text-secondary mt-3 text-secondary">Express Node app using EJS template Engine and MongoDB for
                CRUD Application
            </h5>

            <form class="row mt-4 border p-5 mb-3 col-lg-7" action="/" method="post">

                <div class="form-group col-10">
                    <h4 class="text-secondary"> Form
                        </h5>
                </div>

                <div class="form-group col-10">
                    <label for="name">Name</label>
                    <input id="name" class="form-control" type="text" name="name">
                </div>

                <div class="form-group col-10">
                    <label for="role">Role</label>
                    <input id="role" class="form-control" type="text" name="role">
                </div>

                <div class="form-group  col-10">
                    <button class="btn btn-dark" type="submit">Submit</button>
                </div>



            </form>



            <div class="form-group  col-10 mt-2">
                <% if (query.error) { %>
                <h6 class="text-danger " id="message">
                    Message: <%= query.error %>
                </h6>
                <% } %>

                <% if (query.message) { %>
                <h6 class="text-success " id="message">
                    Message: <%= query.message %>
                </h6>
                <% } %>

            </div>


        </div>





        <table class="tabl table-responsive table-striped  table-hover mt-3">
            <thead class="bg-dark text-white">
                <tr>
                    <th>ID </th>
                    <th>Name </th>
                    <th>Role </th>
                    <th>Date </th>
                    <th>Edit info</th>
                    <th>Delete</th>
                </tr>
            </thead>

            <tbody>
                <% data.forEach(element => { %>

                <tr>
                    <td><%= element._id %> </td>
                    <td><%= element.name %> </td>
                    <td><%= element.role %> </td>
                    <td><%= element.date %> </td>
                    <td> <a href="/edit-info/<%=element._id %>"><i class="fa fa-edit"></i></a> </td>
                    <td> <a href="/delete-info/<%=element._id %>"><i class="fa fa-trash text-danger"></i></a> </td>
                </tr>

                <% });  %>

            </tbody>
        </table>


    </div>

</body>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"
    integrity="sha384-LtrjvnR4Twt/qOuYxE721u19sVFLVSA4hf/rRt6PrZTmiPltdZcI7q7PXQBYTKyf"
    crossorigin="anonymous"></script>

<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

<script>

    $(function () {

        $('table').dataTable({
            "order": []
        });

    });
</script>

</html>